# 0. コンテナの起動
docker-compose up -d
docker-compose exec latent_graph bash

# 0. 依存関係のインストール
pip install -r requirements.txt

# 1. 埋め込みベクトルとFisher計量の抽出
python src/extract.py --config src/config.yaml

# 2. 近傍グラフの構築（Fisher計量版）
python src/graph.py --config src/config.yaml

# 2b. ユークリッド距離版グラフの構築（対照実験用）
python src/graph_euclidean.py --config src/config.yaml

# 2c. Fisher計量の2次元射影
python src/project_metrics_2d.py --config src/config.yaml

# 3. 測地距離計算とMDS可視化
python src/geo.py --config src/config.yaml

# 4. Fisher計量 vs ユークリッド距離の比較可視化（対照実験）
python src/compare_fisher_euclidean.py --config src/config.yaml

# 5. MDSとt-SNEの比較可視化
python src/compare.py --config src/config.yaml

;  曲率の計算
python src/curvature.py --config src/config.yaml

# ============================================
# Streamlit GUI による対話的可視化
# ============================================



# 4. Streamlitアプリケーションを起動

# 方法1: docker-composeで自動起動（推奨）
# docker-compose.ymlに設定済み。コンテナ起動時に自動的にStreamlitが起動します。
docker-compose up -d
# ブラウザで http://localhost:8505 にアクセス

# 方法2: コンテナ内で手動起動
docker-compose exec latent_graph bash
# コンテナ内で実行（デフォルトで8501ポート、ホストからは8505でアクセス可能）
streamlit run app_streamlit.py

# 既存のStreamlitプロセスを確認
ps aux | grep streamlit

# 既存のStreamlitプロセスを停止する場合（ポート競合を避けるため）
# 注意: 他のStreamlitアプリ（例：BERT Embedding Mapping）も停止されます
pkill -9 -f streamlit

# Streamlitを再起動する場合：
streamlit run app_streamlit.py

# 5. ブラウザで以下にアクセス
http://localhost:8505


; gitのcommitとpush
# 現在の状態を確認
git status

# ファイルを追加
git add .gitignore README.md docker-compose.yml requirements.txt Dockerfile.python app_streamlit.py src/ readme report/

# コミット
git commit -m "message"

# その後、ブランチ名をmainに変更
git branch -M main

# プッシュ
git push -u origin main